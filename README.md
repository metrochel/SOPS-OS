# СОпС
**Сибирская Операционная Система** - инновационный проект операционной системы, который взорвёт мир! Наверное.

## Инструкции по сборке
Для сборки вам потребуется следующее:
- Кросс-компилятор GCC на архитектуру i686
- Кросс-компилированные Binutils
- GNU make
- NASM

Инструкции я буду приводить для Unix-подобных систем. Для Windows в целом всё это тоже сработает через WSL или иные штуки для порта Linux.
### Сборка кросс-компилятора и Binutils
Традиционный GCC нам тут не подойдёт. Потребуется так называемый *кросс-компилятор* - компилятор, предназначенный для сборки на иные платформы. Есть замечательное руководство по сборке GCC на i686-elf (что нам, собственно, и нужно): https://wiki.osdev.org/GCC_Cross-Compiler. Я постараюсь его пересказать, но если не получится, рекомендую следовать руководству из ссылки.

Первым делом установите зависимости, необходимых для сборки:
- Ubuntu/Debian: ``sudo apt install build-essential bison flex libgmp3-dev libmpc-dev libmpfr-dev texinfo``
- Fedora: ``sudo dnf install gcc gcc-c++ make bison flex gmp-devel libmpc-dev mpfr-devel texinfo``
- Arch Linux: ``sudo pacman -Syu base-devel gmp libmpc mpfr``

Дальше скачайте исходный код Binutils и GCC.
- Binutils: https://ftp.gnu.org/gnu/binutils/
- GCC: https://ftp.gnu.org/gnu/gcc/

Извлеките архивы.

Создайте папки, куда будете собирать Binutils и GCC. Например, ``gcc-build`` и ``binutils-build``.
Это будет папки __сборки__, то есть где будут лежать собранные бинарники. Папку, куда мы их поместим, чтобы установить, мы будем называть папкой __компилятора__.

Далее в Терминале создайте пару переменных:
```sh
export PREFIX="<папка компилятора>"
export TARGET=i686-elf
export PATH="$PREFIX/bin:$PATH"
```
Папку компилятора рекомендую разместить в HOME, если вы хотите собирать только для данного пользователя. Если вы хотите собрать сразу для всей системы, то разместите где-нибудь в /usr/local. Там создайте отдельную папку и её значение поместите в PREFIX.

Затем перейдите в папку сборки Binutils и выполните там следующее:
```sh
/<путь к исходному коду Binutils>/configure --target=$TARGET --prefix="$PREFIX" --with-sysroot --disable-werror
make
sudo make install # если устанавливаете в HOME, то sudo необязательно
```

Отлично! Binutils собран и установлен. Теперь можно собирать GCC.

Перейдите в папку сборки GCC и делайте вот что:
```sh
/<путь к исходному коду GCC>/configure --target=$TARGET --prefix="$PREFIX" --enable-languages=c,c++ --without-headers
make all-gcc    # будьте готовы, что собираться он будет очень долго
make all-target-libgcc
sudo make install-gcc # если устанавливаете в HOME, то sudo необязательно
sudo make install-target-libgcc
```
Теперь проверьте, что GCC установился:
```sh
i686-elf-gcc --version
```
Если команда успешно выполнилась, то мои поздравления - вы успешно собрали компилятор! Если нет, то пересмотрите, всё ли вы правильно сделали, и попробуйте следовать тому гайду из ссылки.

### Сборка СОпС
Теперь, когда вы собрали все нужные штуки, вы можете собирать СОпС.
1. Скачайте исходный код СОпС. Это можно сделать прямо со страницы ГитХаба: нажмите зелёную кнопку "Code" и в меню нажмите "Download ZIP".
2. Откройте Терминал, перейдите в папку с исходным кодом и триумфально напишите:
```sh
make
```
Если вы всё правильно сделали, то в папке с кодом должна появиться папка "build". В ней есть файл sops.img - это и есть искомый образ СОпС. Теперь вы счастливый обладатель маленького файлика, содержащего в себе СОпС!

## Функции
СОпС поддерживает в себе все новшества современного мира информационных технологий:
- __Разъём PS/2__. Благодаря этой прорывной технологии человек может без труда, используя лишь клавиатуру, вводить буквы, и СОпС сумеет их распознать.
- __Разъём COM__. Эта инновация позволяет СОпС на невероятных скоростях в 12 КБ/с общаться с периферией. СОпС выжмет весь сок из этой технологии и обеспечит стабильную работу любому подключенному устройству, будь то терминал, модем или прочее.
- __Шина PCI__. Новейшие стандарты теперь приняты СОпС. Шина PCI может выдать невероятные скорости передачи данных при своей дешевизне, и СОпС использует эти преимущества на всю катушку.
- __Текстовый интерфейс__. Чтение битов светодиодами - прошлый век! СОпС теперь может использовать эти биты, и при помощи тёмной магии букв, цифр и значков преобразовать эти числа в самые что ни на есть буквы. Вся информация о системе теперь прямо перед глазами. Прозрачность, которой может позавидовать стекло.

![Скриншот текстового интерфейса](etc/image1.bmp)
<p style="text-align: center; font-style: oblique">Рис. 1. Текстовый интерфейс СОпС</p>

- __Часы RTC__. Который час? А СОпС уже знает! Всё, что нужно - написать ей ``time``, и она сама ответит на этот вопрос.
- __Поддержка ATA-дисков__. Инновации в сфере хранения данных уже тут как тот, но СОпС на шаг впереди. Используя  новейшую технологию IDE-контроллеров, система может с лёгкостью считать сколько угодно секторов с диска, даруя возможность хранить вплоть до 256 ТБ данных.

## Системные требования
### Минимальные
- Процессор: Intel 80386
- 32 МБ ОЗУ
- 200 КБ на диске
- Поддержка VGA
### Рекомендуемые
- Процессор: Intel Pentium 4
- 512 МБ ОЗУ
- 100 МБ места на диске
- Поддержка VGA